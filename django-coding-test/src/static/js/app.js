(function(t){function e(e){for(var a,s,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],a=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(a=!1)}a&&(n.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},o={app:0},n=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="src/static/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("c0a9")},be19:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card shadow mb-4"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Product Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.product_name,expression:"product_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Product Name"},domProps:{value:t.product_name},on:{input:function(e){e.target.composing||(t.product_name=e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Product SKU")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.product_sku,expression:"product_sku"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Product Name"},domProps:{value:t.product_sku},on:{input:function(e){e.target.composing||(t.product_sku=e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Description")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{id:"",cols:"30",rows:"4"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])])]),e("div",{staticClass:"card shadow mb-4"},[t._m(0),e("div",{staticClass:"card-body border d-flex flex-row"},[t._m(1),e("span",{attrs:{className:"ml-2"}},[e("vue-dropzone",{ref:"myVueDropzone",attrs:{id:"dropzone",options:t.dropzoneOptions}})],1)])])]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card shadow mb-4"},[t._m(2),e("div",{staticClass:"card-body"},t._l(t.product_variant,(function(r,a){return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Option")]),e("select",{directives:[{name:"model",rawName:"v-model",value:r.option,expression:"item.option"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(r,"option",e.target.multiple?a:a[0])}}},t._l(t.variants,(function(r){return e("option",{domProps:{value:r.id}},[t._v(" "+t._s(r.title)+" ")])})),0)])]),e("div",{staticClass:"col-md-8"},[e("div",{staticClass:"form-group"},[1!=t.product_variant.length?e("label",{staticClass:"float-right text-primary",staticStyle:{cursor:"pointer"},on:{click:function(e){t.product_variant.splice(a,1),t.checkVariant}}},[t._v("Remove")]):e("label",{attrs:{for:""}},[t._v(".")]),e("input-tag",{staticClass:"form-control",on:{input:t.checkVariant},model:{value:r.tags,callback:function(e){t.$set(r,"tags",e)},expression:"item.tags"}})],1)])])})),0),t.product_variant.length<t.variants.length&&t.product_variant.length<3?e("div",{staticClass:"card-footer"},[e("button",{staticClass:"btn btn-primary",on:{click:t.newVariant}},[t._v("Add another option")])]):t._e(),e("div",{staticClass:"card-header text-uppercase"},[t._v("Preview")]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(3),e("tbody",t._l(t.product_variant_prices,(function(r){return e("tr",[e("td",[t._v(t._s(r.title))]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:r.price,expression:"variant_price.price"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:r.price},on:{input:function(e){e.target.composing||t.$set(r,"price",e.target.value)}}})]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:r.stock,expression:"variant_price.stock"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:r.stock},on:{input:function(e){e.target.composing||t.$set(r,"stock",e.target.value)}}})])])})),0)])])])])])]),e("button",{staticClass:"btn btn-lg mx-2 my-2 btn-primary",attrs:{type:"submit"},on:{click:t.saveProduct}},[t._v("Save")]),e("button",{staticClass:"btn btn-secondary btn-lg mx-2 my-2",attrs:{type:"button"}},[t._v("Cancel")])])},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[e("h6",{staticClass:"m-0 font-weight-bold text-primary"},[t._v("Media")])])},function(){var t=this,e=t._self._c;return e("p",[e("span",{staticStyle:{color:"red"},attrs:{className:"mx-3"}},[t._v("DropZone    ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[e("h6",{staticClass:"m-0 font-weight-bold text-primary"},[t._v("Variants")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("td",[t._v("Variant")]),e("td",[t._v("Price")]),e("td",[t._v("Stock")])])])}],n=(r("14d9"),r("13d5"),r("92c3")),s=r.n(n),i=(r("1e3f"),r("74bf")),c=r.n(i),l=r("bc3a"),u=r.n(l),d={components:{vueDropzone:s.a,InputTag:c.a},props:{variants:{type:Array,required:!0},csrfToken:{type:String,required:!0}},data(){return{product_name:"",product_sku:"",description:"",images:[],product_variant:[{option:this.variants[0].id,tags:[]}],product_variant_prices:[],dropzoneOptions:{url:"https://httpbin.org/post",thumbnailWidth:150,maxFilesize:.5,headers:{"My-Awesome-Header":"header value"}}}},methods:{newVariant(){let t=this.variants.map(t=>t.id),e=this.product_variant.map(t=>t.option),r=t.filter(t=>!e.some(e=>t==e));this.product_variant.push({option:r[0],tags:[]})},checkVariant(){let t=[];this.product_variant_prices=[],this.product_variant.filter(e=>{t.push(e.tags)}),this.getCombn(t).forEach(t=>{this.product_variant_prices.push({title:t,price:0,stock:0})})},getCombn(t,e){if(e=e||"",!t.length)return e;let r=this,a=t[0].reduce((function(a,o){return a.concat(r.getCombn(t.slice(1),e+o+"/"))}),[]);return a},saveProduct(){let t={title:this.product_name,sku:this.product_sku,description:this.description,product_image:this.images,product_variant:this.product_variant,product_variant_prices:this.product_variant_prices};console.log(t),u.a.defaults.headers.common["X-CSRFToken"]=this.csrfToken,u.a.post("/product/create/",t).then(t=>{console.log(t.data),console.log(baseURL)},{headers:{"Content-Type":"application/json"}}).catch(t=>{console.log(t)}),console.log(t)}},mounted(){console.log("Component mounted.")}},p=d,v=r("2877"),m=Object(v["a"])(p,a,o,!1,null,null,null);e["default"]=m.exports},c0a9:function(t,e,r){"use strict";r.r(e);r("c3e6"),r("0e33");var a=r("a026"),o=(r("1157"),r("e903"),r("bc3a")),n=r.n(o);window.$=window.jQuery=r("1157");const s=document.querySelector("[name=csrfmiddlewaretoken]").content;n.a.defaults.xsrfHeaderName="X-CSRFToken",n.a.defaults.xsrfCookieName="csrftoken",n.a.defaults.headers.common["X-CSRFToken"]=s,window.Vue=a["a"],a["a"].component("create-product",r("be19").default);new a["a"]({el:"#app"})},e903:function(t,e,r){}});
//# sourceMappingURL=app.js.map